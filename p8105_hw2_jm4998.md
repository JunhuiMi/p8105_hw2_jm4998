Homework 2\_Data Wrangling\_jm4998
================
Junhui Mi
2019/9/24

# Problem 1

*Read data from
Excel*

``` r
Mr_data = read_excel("../dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                     sheet = 1, range = "A2:N336") %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(sports_balls))
```

*Join 2017 and 2018 precipitation
data*

``` r
prec_2018 = read_excel("../dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                     sheet = 3, range = "A2:B14") %>%
  janitor::clean_names() %>%
  mutate(year = rep(2018, 12), month = month.name[as.integer(month)]) %>%
  drop_na(total) 

prec_2017 = read_excel("../dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                     sheet = 4, range = "A2:B14") %>%
  janitor::clean_names() %>%
  mutate(year = rep(2017, 12), month = month.name[as.integer(month)]) %>%
  drop_na(total)

prec_all = full_join(prec_2018, prec_2017)
```

    ## Joining, by = c("month", "total", "year")

## Description

1)  *Mr\_data* shows Mr. Trash Wheel data, with 285 observations. There
    are 14 key variables: dumpster, month, year, date, weight\_tons,
    volume\_cubic\_yards, plastic\_bottles, polystyrene,
    cigarette\_butts, glass\_bottles, grocery\_bags, chip\_bags,
    sports\_balls, homes\_powered.

2)  *prec\_all* shows the combination of 2017 precipitation and 2018
    precipitation data, with 19. observations. There are 3 key
    variables: month, total, year.

3)  The the total precipitation in 2018 is 23.5.

4)  The median number of sports balls in a dumpster in 2017 is
8.

# Problem 2

``` r
pols_month = read_csv(file = "../dataset/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, c("year", "month", "day"), sep = "-") %>%
  mutate(month = month.name[as.integer(month)]) %>%
  pivot_longer(
    cols = starts_with("prez"),
    names_to = "president",
    values_to = "value") %>% 
  filter(value == 1 | value == 2) %>% 
  select(-day, -value) %>%
  mutate(
    president = replace(president, president == "prez_gop", "republican"),
    president = replace(president, president == "prez_dem", "democrat"))
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
unemployment = read_csv(file = "../dataset/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>%
  rename(January = jan, February = feb, March = mar, April = apr,
         May = may, June = jun, July = jul, August = aug,
         September = sep, October = oct, November = nov, December = dec) %>%
  pivot_longer(
    cols = January:December,
    names_to = "month",
    values_to = "unemployment_rate") %>%
  select(year, month, everything())
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
snp = read_csv(file = "../dataset/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, c("month", "day", "year"), sep = "/") %>%
  mutate(month = month.name[as.integer(month)]) %>%
  select(year, month, close)
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
pols_month_2 = pols_month %>%
  mutate(date = paste(year, month, sep = "-")) %>%
  select(date, gov_gop:president)

unemployment_2 = unemployment %>%
  mutate(date = paste(year, month, sep = "-")) %>%
  select(date, unemployment_rate)

snp_2 = snp %>%
  mutate(date = paste(year, month, sep = "-")) %>%
  select(date, close)

pols_snp = left_join(pols_month_2, snp_2, by = "date")
pols_snp_unemployment = left_join(pols_snp, unemployment_2, by = "date") %>%
  separate(date, c("year", "month"), sep = "-")
```

## Description

1)  The three initial datasets: *pols\_month* contains the result of
    each monthly pols; *unemployment* contains rates of unemployment
    monthly; *snp* contains monthly close data.

2)  The resulting dataset *pols\_snp\_unemployment* merges data from
    *pols\_month*, *unemployment* and *snp*, with 822 rows and 11
    columns. It contains data from year 1947 to 2015.Its variables are:
    year, month, gov\_gop, sen\_gop, rep\_gop, gov\_dem, sen\_dem,
    rep\_dem, president, close, unemployment\_rate. “year” and “month”
    are key variables which merge into “date” to be more accurate.

# Problem 3

``` r
baby_names = read_csv(file = "../dataset/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  mutate(childs_first_name = str_to_title(childs_first_name)) %>%
  distinct() 
```

    ## Parsed with column specification:
    ## cols(
    ##   `Year of Birth` = col_double(),
    ##   Gender = col_character(),
    ##   Ethnicity = col_character(),
    ##   `Child's First Name` = col_character(),
    ##   Count = col_double(),
    ##   Rank = col_double()
    ## )

``` r
baby_names_olivia = baby_names %>%
  filter(childs_first_name == "Olivia", gender == "FEMALE") %>%
  select(year_of_birth, ethnicity, rank) %>%
  pivot_wider(
    names_from = "year_of_birth",
    values_from = "rank")
baby_names_olivia
```

    ## # A tibble: 7 x 7
    ##   ethnicity                  `2016` `2015` `2014` `2013` `2012` `2011`
    ##   <chr>                       <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>
    ## 1 ASIAN AND PACIFIC ISLANDER      1      1      1      3     NA      4
    ## 2 BLACK NON HISPANIC              8      4      8      6     NA     10
    ## 3 HISPANIC                       13     16     16     22     22     18
    ## 4 WHITE NON HISPANIC              1      1      1      1     NA      2
    ## 5 ASIAN AND PACI                 NA     NA     NA     NA      3     NA
    ## 6 BLACK NON HISP                 NA     NA     NA     NA      8     NA
    ## 7 WHITE NON HISP                 NA     NA     NA     NA      4     NA

``` r
popular_male_names = baby_names %>%
  filter(gender == "MALE", rank == "1") %>%
  select(year_of_birth, ethnicity, childs_first_name) %>%
  pivot_wider(
    names_from = "year_of_birth",
    values_from = "childs_first_name")
popular_male_names
```

    ## # A tibble: 7 x 7
    ##   ethnicity                  `2016` `2015` `2014` `2013` `2012` `2011` 
    ##   <chr>                      <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  
    ## 1 ASIAN AND PACIFIC ISLANDER Ethan  Jayden Jayden Jayden <NA>   Ethan  
    ## 2 BLACK NON HISPANIC         Noah   Noah   Ethan  Ethan  <NA>   Jayden 
    ## 3 HISPANIC                   Liam   Liam   Liam   Jayden Jayden Jayden 
    ## 4 WHITE NON HISPANIC         Joseph David  Joseph David  <NA>   Michael
    ## 5 ASIAN AND PACI             <NA>   <NA>   <NA>   <NA>   Ryan   <NA>   
    ## 6 BLACK NON HISP             <NA>   <NA>   <NA>   <NA>   Jayden <NA>   
    ## 7 WHITE NON HISP             <NA>   <NA>   <NA>   <NA>   Joseph <NA>

``` r
plot_data = baby_names %>%
  filter(gender == "MALE", ethnicity == "WHITE NON HISPANIC", 
         year_of_birth == "2016")
ggplot(plot_data, aes(x = rank, y = count)) + 
  geom_point()
```

![](p8105_hw2_jm4998_files/figure-gfm/create_plot-1.png)<!-- -->

``` r
ggsave("scatter plot of male, white non-hispanic children born in 2016.png")
```

    ## Saving 7 x 5 in image
