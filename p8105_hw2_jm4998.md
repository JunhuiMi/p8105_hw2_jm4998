Homework 2\_Data Wrangling\_jm4998
================
Junhui Mi
2019/9/24

# Problem 1

*Read data from
Excel*

``` r
Mr_data = read_excel("../dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                     sheet = 1, range = "A2:N336") %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(sports_balls))
```

*Join 2017 and 2018 precipitation
data*

``` r
prec_2018 = read_excel("../dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                     sheet = 3, range = "A2:B14") %>%
  janitor::clean_names() %>%
  mutate(year = rep(2018, 12), month = month.name[as.integer(month)]) %>%
  drop_na(total) 

prec_2017 = read_excel("../dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                     sheet = 4, range = "A2:B14") %>%
  janitor::clean_names() %>%
  mutate(year = rep(2017, 12), month = month.name[as.integer(month)]) %>%
  drop_na(total)

prec_all = full_join(prec_2018, prec_2017)
```

    ## Joining, by = c("month", "total", "year")

## Description

1)  *Mr\_data* shows Mr. Trash Wheel data, with 285 observations. There
    are 14 key variables: dumpster, month, year, date, weight\_tons,
    volume\_cubic\_yards, plastic\_bottles, polystyrene,
    cigarette\_butts, glass\_bottles, grocery\_bags, chip\_bags,
    sports\_balls, homes\_powered.

2)  *prec\_all* shows the combination of 2017 precipitation and 2018
    precipitation data, with 19. observations. There are 3 key
    variables: month, total, year.

3)  The the total precipitation in 2018 is 23.5.

4)  The median number of sports balls in a dumpster in 2017 is
8.

# Problem 2

``` r
pols_month = read_csv(file = "../dataset/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, c("year", "month", "day"), sep = "-") %>%
  mutate(month = month.name[as.integer(month)]) %>%
  pivot_longer(
    cols = starts_with("prez"),
    names_to = "president",
    values_to = "value") %>% 
  filter(value == 1) %>% 
  select(-day, -value) %>%
  mutate(
    president = replace(president, president == "prez_gop", "republican"),
    president = replace(president, president == "prez_dem", "democrat"))
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
unemployment = read_csv(file = "../dataset/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>%
  rename(January = jan, February = feb, March = mar, April = apr,
         May = may, June = jun, July = jul, August = aug,
         September = sep, October = oct, November = nov, December = dec) %>%
  pivot_longer(
    cols = January:December,
    names_to = "month",
    values_to = "unemployment_rate") %>%
  select(year, month, everything())
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
snp = read_csv(file = "../dataset/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, c("month", "day", "year"), sep = "/") %>%
  mutate(month = month.name[as.integer(month)]) %>%
  select(year, month, close)
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
pols_month_2 = pols_month %>%
  mutate(date = paste(year, month, sep = "-")) %>%
  select(date, gov_gop:president)

unemployment_2 = unemployment %>%
  mutate(date = paste(year, month, sep = "-")) %>%
  select(date, unemployment_rate)

snp_2 = snp %>%
  mutate(date = paste(year, month, sep = "-")) %>%
  select(date, close)

pols_snp = left_join(pols_month_2, snp_2, by = "date")
pols_snp_unemployment = left_join(pols_snp, unemployment_2, by = "date") %>%
  separate(date, c("year", "month"), sep = "-")
```

## Description

1)  The three initial datasets: *pols\_month* contains the result of
    each monthly pols; *unemployment* contains rates of unemployment
    monthly; *snp* contains monthly close data.

2)  The resulting dataset *pols\_snp\_unemployment* merges data from
    *pols\_month*, *unemployment* and *snp*, with 817 rows and 11
    columns. It contains data from year 1947 to 2015.Its variables are:
    year, month, gov\_gop, sen\_gop, rep\_gop, gov\_dem, sen\_dem,
    rep\_dem, president, close, unemployment\_rate. “year” and “month”
    are key variables which merge into “date” to be more accurate.

# Problem 3
